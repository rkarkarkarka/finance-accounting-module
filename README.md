# Отчёт по проекту "Модуль финансового учёта"

## Общая идея решения

Модуль финансового учёта разработан для управления личными финансами пользователей. Основной функционал включает:

- **Управление счетами**: Создание, редактирование и удаление банковских счетов.
- **Управление категориями**: Создание, редактирование и удаление категорий доходов и расходов.
- **Управление операциями**: Создание, редактирование и удаление операций (доходы и расходы).
- **Аналитика**: Подсчёт разницы доходов и расходов, группировка операций по категориям.
- **Импорт/экспорт данных**: Поддержка форматов CSV и JSON.
- **Генерация отчётов**: Отчёты по доходам и расходам за выбранный период.
- **Измерение времени выполнения команд**: Декоратор для измерения времени выполнения операций.

### Изменения в функциональных требованиях
- Добавлена возможность экспорта данных в JSON и CSV с использованием паттерна **Посетитель**.
- Реализована генерация отчётов с использованием паттерна **Фабрика** и **Стратегия**.
- Добавлен декоратор для измерения времени выполнения команд.



## Принципы SOLID и GRASP

### Принципы SOLID

1. **Single Responsibility Principle (SRP)**:
   - Каждый класс отвечает за одну задачу. Например:
     - `BankAccountService` управляет счетами.
     - `CategoryService` управляет категориями.
     - `OperationService` управляет операциями.

2. **Open/Closed Principle (OCP)**:
   - Классы открыты для расширения, но закрыты для модификации. Например:
     - `DataImporter` можно расширить для поддержки новых форматов данных.

3. **Liskov Substitution Principle (LSP)**:
   - Наследники могут заменять родительские классы. Например:
     - `CsvDataImporter` и `JsonDataImporter` заменяют `DataImporter`.

4. **Interface Segregation Principle (ISP)**:
   - Интерфейсы разделены на мелкие. Например:
     - `IReport` отвечает только за генерацию отчётов.
     - `IVisitor` отвечает только за экспорт данных.

5. **Dependency Inversion Principle (DIP)**:
   - Зависимости инвертированы через DI-контейнер. Например:
     - Сервисы внедряются через конструкторы.

### Принципы GRASP

1. **High Cohesion**:
   - Классы имеют чёткую ответственность. Например:
     - `Operation` отвечает только за данные операции.
     - `ReportBuilder` отвечает только за построение отчётов.

2. **Low Coupling**:
Разделение функциональности на простые доменные классы и сервисы делает структуру гибкой, таким образом каждая часть системы имеет чёткую ответственность и может развиваться независимо.Если потребуется добавить новую бизнес-логику (например, рассчитать сложные итоги по операциям), можно создать новый сервис или расширить уже существующий, не нарушая целостность и простоту доменных классов. 


## Паттерны GoF

### Порождающие паттерны

1. **Фабрика (Factory)**:
   - **Класс**: `ReportFactory`.
   - Создаёт отчёты в зависимости от типа транзакции (доход или расход).
   - Инкапсулирует логику создания объектов, упрощает добавление новых типов отчётов.

2. **Строитель (Builder)**:
   - **Класс**: `ReportBuilder`.
   -  Поэтапно создаёт отчёты, добавляя операции и выводя итоговый результат.
   - Упрощает процесс создания сложных объектов, таких как отчёты.

### Структурные паттерны

1. **Фасад (Facade)**:
   - **Классы**: `BankAccountFacade`, `CategoryFacade`, `OperationFacade`.
   - Упрощает взаимодействие с сервисами, предоставляя единый интерфейс.
   - Снижает сложность взаимодействия с системой.

2. **Декоратор (Decorator)**:
   - **Класс**: `TimingCommandDecorator`.
   - Добавляет измерение времени выполнения команд.
   - Позволяет добавлять новую функциональность без изменения существующего кода.

### Поведенческие паттерны

1. **Команда (Command)**:
   - **Класс**: `CreateOperationCommand`.
   - Инкапсулирует операции в виде объектов.
   - Позволяет легко управлять выполнением, отменой и повторением операций.

2. **Посетитель (Visitor)**:
   - **Классы**: `ExportToCsvVisitor`, `ExportToJsonVisitor`.
   - Реализует экспорт данных в CSV и JSON.
   - Позволяет добавлять новые операции к объектам без изменения их структуры.

3. **Шаблонный метод (Template Method)**:
   - **Класс**: `DataImporter`.
   - Определяет общий алгоритм импорта данных, оставляя реализацию конкретных шагов подклассам.
   - Упрощает добавление новых форматов импорта.

4. **Стратегия (Strategy)**:
   - **Классы**: `IncomeReport`, `ExpenseReport`.
   - Реализует различные стратегии генерации отчётов.
   - Позволяет легко добавлять новые типы отчётов.

## Инструкция по запуску
Для гарантированно устойчивой работы програмы необходимо установить .NET 8.0 (https://dotnet.microsoft.com/ru-ru/download/dotnet/8.0/runtime?cid=getdotnetcore&os=windows&arch=x64).

### Локальный запуск
1. Клонировать репозиторий:
git clone https://github.com/rkarkarkarka/finance-accounting-module
2. Запустить проект из папки, куда клонировали:
cd <название папки>
dotnet run

### Запуск через Visual Studio
1. Открыть проект в Visual Studio.
2. Восстановить зависимости через NuGet (если нужно).
3. Запустиьб проект по кнопке в VS (или через F5 / Ctrl + F5).
